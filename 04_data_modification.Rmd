---
title: "Data Modification"
author: "Bill Perry"
date: "2018/03/14"
output:
  html_document:
    toc: true
    toc_float: true
---

##Load libraries
##Read files

```{r, message=FALSE, warning=FALSE}
# One new package for summary stats
#install.packages("psych")

# load the libraries each time you restart R
library(tidyverse)
library(lubridate)
library(scales)
library(skimr)

library(janitor)

# read in the file
iris.df <- read_csv("data/iris.csv")

glimpse(iris.df)
```

##The pipe
So lets start thinking about how to string a lot of commands together. We do this using the pipe command ```%>%```. This takes what is on the left and passes it to the right.    

<br>    
  
Lets try this with a plot.  What happens here is it takes the dataframe and then passes it to the ggplot commands. So the dataframe is removed from the ggplot commands. I will show you why in a second that this is really cool.

```{r}
iris.df %>% 
  ggplot(aes(Sepal.Width)) +
  geom_histogram()
```


##Janitor     
So there is a package Janitor that will clean up the dataframe you read in and make it easier to work with. The ```clean_names()``` will remove all odd characters, convert periods to _ and make all lower case. This is often easier to work with. 
Lets first fix all those crazy names
```{r}
iris.df <- read_csv("data/iris.csv") %>% clean_names()
  # remove_empty_rows() %>% # removes empty rows if they are thee
  # remove_empty_cols() # removes the empty column is they are there

glimpse(iris.df)

```

##Selecting variables
What if you wanted to select only certian variables? Now lets use two ways to do the same thing.....

```{r}
petal_width.df <- select(iris.df, species, petal_width)
```



You can do the same thing with the pipe command   
```{r}
petal_width.df <- iris.df %>% select(species, petal_width)
```

Lets assume you wanted to select all petal varaibles you can use things like: 
````starts_with(), ends_with(), contains(),  everything()```` in various combinations such as

```{r}
petal.df <- iris.df %>% select(species, species, starts_with("petal"))
```

